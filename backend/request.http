@host = http://localhost:3000
@json = application/json
@authToken = {{accesstoken}}

@menusUrl = {{host}}/api/menus
@proverbesUrl = {{host}}/api/proverbes
@suggestionsUrl = {{host}}/api/suggestions
@adminUrl = {{host}}/admin

###
### Auth
###

### Inscription (rôle admin par défaut)
POST {{host}}/api/auth/register
Content-Type: {{json}}

{
  "username": "admin",
  "password": "password"
}

### Connexion (récupère access_token)
POST {{host}}/api/auth/login
Content-Type: {{json}}

{
  "username": "admin",
  "password": "password"
}

### Profil courant (protégé JWT + rôle admin)
GET {{host}}/api/auth/me
Authorization: Bearer {{authToken}}

###
### Menus
###

@menuId = 1

### Liste de tous les menus
GET {{menusUrl}}

### Récupération d'un menu par id
GET {{menusUrl}}/{{menuId}}

### Création d'un menu
POST {{menusUrl}}
Content-Type: {{json}}

{
  "jour": "lundi",
  "periode": "midi",
  "entree": "salade verte",
  "plat": "poulet roti",
  "fromage": "brie",
  "dessert": "tarte aux pommes"
}

### Mise à jour partielle d'un menu
PATCH {{menusUrl}}/{{menuId}}
Content-Type: {{json}}

{
  "plat": "poisson",
  "dessert": "mousse au chocolat"
}

### Suppression d'un menu par id
DELETE {{menusUrl}}/{{menuId}}

### Suppression de tous les menus
DELETE {{menusUrl}}

###
### Proverbes / blagues (ressource unique)
###

### Récupération du proverbe/blague unique (id fixe 1)
GET {{proverbesUrl}}

### Création ou remplacement du proverbe/blague unique
POST {{proverbesUrl}}
Content-Type: {{json}}

{
  "type": "proverbe",
  "content": "Qui va au marché"
}

### Création d'une blague
POST {{proverbesUrl}}
Content-Type: {{json}}

{
  "type": "blague",
  "content": "Pourquoi les développeurs confondent Halloween et Noël ? Parce que OCT 31 == DEC 25."
}

### Mise à jour partielle du proverbe/blague unique
PATCH {{proverbesUrl}}
Content-Type: {{json}}

{
  "content": "Nouvelle version du proverbe ou blague"
}

### Suppression du proverbe/blague unique
DELETE {{proverbesUrl}}

###
### Suggestions
###

@suggestionId = 1

### Création d'une suggestion
POST {{suggestionsUrl}}
Content-Type: {{json}}

{
  "titre": "Une nouvelle idée",
  "description": "Détail de la suggestion"
}

### Liste de toutes les suggestions
GET {{suggestionsUrl}}

### Récupération d'une suggestion par id
GET {{suggestionsUrl}}/{{suggestionId}}

### Mise à jour partielle d'une suggestion
PATCH {{suggestionsUrl}}/{{suggestionId}}
Content-Type: {{json}}

{
  "description": "Mise à jour de la suggestion"
}

### Suppression d'une suggestion par id
DELETE {{suggestionsUrl}}/{{suggestionId}}

###
### Admin (non protégé pour l'instant)
###

@adminId = 1

### Création admin
POST {{adminUrl}}
Content-Type: {{json}}

{
  "name": "Admin user"
}

### Liste admin
GET {{adminUrl}}

### Admin par id
GET {{adminUrl}}/{{adminId}}

### Mise à jour admin
PATCH {{adminUrl}}/{{adminId}}
Content-Type: {{json}}

{
  "name": "Admin mis à jour"
}

### Suppression admin
DELETE {{adminUrl}}/{{adminId}}
